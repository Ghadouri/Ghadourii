async function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // تحميل خط يدعم العربية
    const arabicFont = await fetch('https://cdn.jsdelivr.net/gh/alif-type/amiri-webfont/Amiri-Regular.ttf')
        .then(response => response.arrayBuffer());

    doc.addFileToVFS('Amiri-Regular.ttf', arabicFont);
    doc.addFont('Amiri-Regular.ttf', 'Amiri', 'normal');
    doc.setFont('Amiri');

    doc.text('نتائج الطلاب', 10, 10);

    const table = document.getElementById('results-table');
    const rows = table.querySelectorAll('tr');

    let y = 20;
    rows.forEach((row) => {
        const cells = row.querySelectorAll('th, td');
        let text = '';
        cells.forEach(cell => {
            text += cell.textContent + '   ';
        });
        doc.text(text, 10, y);
        y += 10;
    });

    doc.save('نتائج الطلاب.pdf');
}
